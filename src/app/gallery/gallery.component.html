<main>
    <!-- Gallery Banner Section -->
    <section class="gallery-banner">
        <div class="banner-overlay">
            <h1>Gallery</h1>
        </div>
    </section>

    <!-- Gallery Grid Section -->
    <!-- Gallery Grid Section -->
    <section class="gallery-section">
        <div class="container">
            <div class="gallery-grid">
                <div *ngFor="let item of gallery; let i = index" class="gallery-item">
                    <ng-container *ngIf="item.type === 'image'">
                        <img [src]="item.src" [alt]="'Gallery image ' + (i + 1)" class="gallery-image" loading="lazy" (click)="openModal(i)">
                    </ng-container>
                    <ng-container *ngIf="item.type === 'video'">
                        <video #video [src]="item.src" class="gallery-video" preload="metadata" muted loop playsinline (click)="openModal(i)" (loadedmetadata)="onVideoLoaded(video)">
                            Your browser does not support the video tag.
                        </video>
                        <div class="video-controls" (click)="$event.stopPropagation()">
                            <button class="video-control-btn" (click)="togglePlay(video)" [title]="video.paused ? 'Play' : 'Pause'">
                                <span *ngIf="video.paused">‚ñ∂</span>
                                <span *ngIf="!video.paused">‚è∏</span>
                            </button>
                            <button class="video-control-btn" (click)="toggleMute(video, i)" [title]="getVideoMuteState(i) ? 'Unmute' : 'Mute'">
                                <span *ngIf="getVideoMuteState(i)">üîá</span>
                                <span *ngIf="!getVideoMuteState(i)">üîä</span>
                            </button>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal for viewing images/videos -->
    <div class="modal-overlay" *ngIf="isModalOpen" (click)="closeModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <button class="modal-close" (click)="closeModal()">&times;</button>
            
            <!-- Navigation arrows -->
            <button class="modal-nav prev" (click)="previousItem()" *ngIf="gallery.length > 1">&#8249;</button>
            <button class="modal-nav next" (click)="nextItem()" *ngIf="gallery.length > 1">&#8250;</button>
            
            <!-- Content display -->
            <div class="modal-media" *ngIf="currentModalIndex >= 0">
                <ng-container *ngIf="gallery[currentModalIndex]?.type === 'image'">
                    <img [src]="gallery[currentModalIndex].src" [alt]="'Gallery image ' + (currentModalIndex + 1)" class="modal-image">
                </ng-container>
                <ng-container *ngIf="gallery[currentModalIndex]?.type === 'video'">
                    <video [src]="gallery[currentModalIndex].src" class="modal-video" controls muted loop playsinline>
                        Your browser does not support the video tag.
                    </video>
                </ng-container>
            </div>
            
            <!-- Counter -->
            <div class="modal-counter" *ngIf="gallery.length > 1">
                {{ currentModalIndex + 1 }} / {{ gallery.length }}
            </div>
        </div>
    </div>

</main>